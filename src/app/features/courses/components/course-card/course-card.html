<div
  data-aos="fade-up"
  class="relative hover:bg-gray-50 dark:hover:bg-black w-full h-[430px] bg-white dark:bg-main-dark shadow dark:shadow-main-gray rounded-lg flex flex-col"
>
  <img
    [src]="course()?.image"
    alt="course image"
    class="w-full h-[180px] object-cover rounded-t-lg cursor-pointer"
    (click)="router.navigate([`/courses/${course()?.id}`])"
  />
  <div class="w-full flex flex-col p-3">
    <h1 class="text-lg font-bold">{{ course()?.title }}</h1>
    <p class="text-xs font-medium text-main-gray pt-1 line-clamp-2">{{ course()?.description }}</p>
    <div class="w-full flex items-end justify-between">
      <span class="mt-3 text-xl font-bold">{{ course()?.price | currency }}</span>
      <div class="flex items-center gap-1 mb-1">
        <!-- Filled stars -->
        @for (item of ratingsService.getFilledStars(course()?.rating); track $index) {
        <img src="images/star-yellow.png" alt="yellow star" class="w-4 h-4 object-cover" />
        }

        <!-- Outlined stars -->
        @for (item of ratingsService.getOutlinedStars(course()?.rating); track $index) {
        <img src="images/star-gray.png" alt="gray star" class="w-4 h-4 object-cover" />
        }
      </div>
    </div>
    <span class="text-xs text-main-gray font-medium my-2">Author:</span>
    <div class="w-full flex items-center gap-2">
      <img
        [src]="course()?.authorPic"
        alt="author pic"
        class="w-10 h-10 rounded-full object-cover"
      />
      <span class="text-base font-semibold">{{ course()?.author }}</span>
    </div>
  </div>
  <div class="w-full h-[1px] bg-gray-300 dark:bg-main-gray"></div>
  <div class="w-full px-3 py-1.5 flex items-center justify-end gap-2">
    <p-button
      [disabled]="cartStore.isAdding()"
      [loading]="cartStore.isAdding()"
      (onClick)="addToCart()"
      size="small"
      class="!text-white"
      variant="text"
    >
      <ng-template pTemplate="content">
        <lucide-icon [img]="ShoppingCartIcon" [size]="16"></lucide-icon>
        +Add to cart
      </ng-template>
    </p-button>
    <p-button
      ariaLabel="Add to favourites icon"
      [disabled]="favouritesStore.isAdding()"
      (onClick)="toggleFavvourite()"
      class="absolute top-1 right-1"
      variant="text"
      severity="info"
      [rounded]="true"
    >
      <ng-template pTemplate="icon">
        <lucide-angular
          [class.text-main-blue]="isFavourite"
          [class.text-gray-400]="!isFavourite"
          [strokeWidth]="isFavourite ? 3 : 2"
          size="20"
          [name]="HeartIcon"
        />
      </ng-template>
    </p-button>
  </div>
</div>
